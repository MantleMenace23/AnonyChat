<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Games</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col">

  <!-- Header -->
  <header class="p-4 bg-gray-800 shadow-md">
    <h1 class="text-2xl font-bold text-center">Games</h1>
  </header>

  <!-- Search Bar -->
  <div id="searchWrapper" class="p-4">
    <input id="searchInput" type="text" placeholder="Search games..."
      class="w-full p-2 rounded bg-gray-800 text-white border border-gray-700 focus:outline-none focus:border-blue-500">
  </div>

  <!-- Main content -->
  <main id="gamesGrid" class="grid grid-cols-2 md:grid-cols-4 gap-6 p-4"></main>

  <!-- No Results -->
  <p id="noResults" class="hidden text-center text-gray-400 mt-4">No games found.</p>

  <script>
    const games = [
      { name: "Game One", file: "game1.html" },
      { name: "Game Two", file: "game2.html" },
      { name: "Game Three", file: "game3.html" },
      { name: "Game Four", file: "game4.html" }
    ];

    function loadGames() {
      const grid = document.getElementById("gamesGrid");
      const searchWrapper = document.getElementById("searchWrapper");
      const noResults = document.getElementById("noResults");

      grid.className = "grid grid-cols-2 md:grid-cols-4 gap-6 p-4";
      grid.innerHTML = "";

      games.forEach(game => {
        const card = document.createElement("div");
        card.className = "bg-gray-800 rounded-lg shadow-lg p-4 flex flex-col items-center";

        card.innerHTML = `
          <h2 class="text-lg font-semibold mb-2">${game.name}</h2>
          <button onclick="playGame('${game.file}')"
            class="px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-indigo-700 transition w-full">
            Play
          </button>
        `;

        grid.appendChild(card);
      });

      searchWrapper.classList.remove("hidden");
      noResults.classList.add("hidden");
    }

    function playGame(file) {
      const grid = document.getElementById("gamesGrid");
      const searchWrapper = document.getElementById("searchWrapper");
      const noResults = document.getElementById("noResults");

      searchWrapper.classList.add("hidden");
      grid.className = ""; // remove grid to allow fullscreen

      grid.innerHTML = `
        <div class="relative w-full h-screen">
          <button onclick="loadGames()" 
            class="absolute top-4 left-4 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded z-20">
            ‚Üê Back
          </button>
          <iframe src="/game_uploads/${file}" 
                  class="absolute top-0 left-0 w-full h-full border-0"></iframe>
        </div>
      `;

      noResults.classList.add("hidden");
    }

    // Search functionality
    document.getElementById("searchInput").addEventListener("input", (e) => {
      const query = e.target.value.toLowerCase();
      const filteredGames = games.filter(game => game.name.toLowerCase().includes(query));

      const grid = document.getElementById("gamesGrid");
      grid.innerHTML = "";

      if (filteredGames.length === 0) {
        document.getElementById("noResults").classList.remove("hidden");
      } else {
        document.getElementById("noResults").classList.add("hidden");
        filteredGames.forEach(game => {
          const card = document.createElement("div");
          card.className = "bg-gray-800 rounded-lg shadow-lg p-4 flex flex-col items-center";

          card.innerHTML = `
            <h2 class="text-lg font-semibold mb-2">${game.name}</h2>
            <button onclick="playGame('${game.file}')"
              class="px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-indigo-700 transition w-full">
              Play
            </button>
          `;

          grid.appendChild(card);
        });
      }
    });

    // Load games on page start
    loadGames();
  </script>
</body>
</html>
